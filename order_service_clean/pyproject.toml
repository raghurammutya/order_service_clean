[tool.ruff]
# Enable specific rules to catch dangerous exception handling
select = [
    "E",   # pycodestyle errors
    "W",   # pycodestyle warnings  
    "F",   # pyflakes
    "B",   # flake8-bugbear (catches dangerous patterns)
    "SIM", # flake8-simplify
]

# Specific rules for exception handling safety
extend-select = [
    "B902", # Invalid first argument used for method
    "B904", # Use raise from to specify exception cause
    "BLE001", # Do not catch blind exception: Exception
]

[tool.ruff.per-file-ignores]
# Strict exception handling for critical modules
"app/services/kite_client*.py" = []  # No broad exception handling in order processing
"app/api/v1/endpoints/*.py" = []     # No broad exception handling in API endpoints

# Allow some broader patterns only where justified
"*/test_*.py" = ["BLE001"]           # Tests can catch all exceptions
"scripts/*" = ["BLE001"]             # Scripts can have broad error handling
"app/workers/*" = []                 # Workers must use specific exception handling

[tool.ruff.flake8-bugbear]
# Additional bugbear configuration
extend-immutable-calls = ["fastapi.Depends", "pydantic.Field"]