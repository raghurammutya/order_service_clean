{
  "test_run_timestamp": "2026-01-22T13:19:38.291062",
  "environment": "production_validation",
  "test_results": {
    "syntax_check": {
      "command": "/usr/bin/python3 -m py_compile app/main.py",
      "returncode": 0,
      "duration_seconds": 0.05,
      "stdout": "",
      "stderr": ""
    },
    "security_tests": {
      "command": "/usr/bin/python3 -m pytest tests/test_authentication_security.py -v --tb=short",
      "returncode": 1,
      "duration_seconds": 1.82,
      "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.12.3, pytest-8.3.3, pluggy-1.6.0 -- /usr/bin/python3\ncachedir: .pytest_cache\nmetadata: {'Python': '3.12.3', 'Platform': 'Linux-6.8.0-90-generic-x86_64-with-glibc2.39', 'Packages': {'pytest': '8.3.3', 'pluggy': '1.6.0'}, 'Plugins': {'xdist': '3.8.0', 'Faker': '20.1.0', 'metadata': '3.1.1', 'cov': '5.0.0', 'html': '4.1.1', 'timeout': '2.4.0', 'anyio': '3.7.1', 'asyncio': '0.24.0', 'mock': '3.12.0'}}\nrootdir: /home/stocksadmin/order_service_clean\nconfigfile: pytest.ini\nplugins: xdist-3.8.0, Faker-20.1.0, metadata-3.1.1, cov-5.0.0, html-4.1.1, timeout-2.4.0, anyio-3.7.1, asyncio-0.24.0, mock-3.12.0\nasyncio: mode=Mode.STRICT, default_loop_scope=None\ncollecting ... collected 7 items\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required FAILED [ 14%]\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_invalid_service_token_rejected FAILED [ 28%]\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_valid_service_token_accepted FAILED [ 42%]\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_unauthorized_service_rejected FAILED [ 57%]\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_expired_service_token_rejected FAILED [ 71%]\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_test_auth_disabled_in_production PASSED [ 85%]\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_test_auth_only_in_dev_environments PASSED [100%]\n\n=================================== FAILURES ===================================\n_______ TestAuthenticationSecurity.test_service_to_service_auth_required _______\ntests/test_authentication_security.py:18: in test_service_to_service_auth_required\n    from app.api.v1.endpoints.positions_integration import verify_internal_service\napp/api/v1/__init__.py:6: in <module>\n    from app.api.v1.endpoints import (\napp/api/v1/endpoints/manual_attribution.py:16: in <module>\n    from ...dependencies.acl import require_permissions\napp/api/dependencies/acl.py:10: in <module>\n    from app.core.database import get_db\nE   ModuleNotFoundError: No module named 'app.core'\n------------------------------ Captured log call -------------------------------\nWARNING  app.config.settings:settings.py:41 Service registry module not available, using fallbacks\nWARNING  app.config.settings:settings.py:149 Config service client not available in test mode: No module named 'common'\nWARNING  app.config.settings:settings.py:208 Using test default for JWT_SIGNING_KEY_ID\nWARNING  app.config.settings:settings.py:208 Using test default for INTERNAL_SERVICE_SECRET\nWARNING  app.config.settings:settings.py:208 Using test default for REDIS_URL\nWARNING  app.config.settings:settings.py:208 Using test default for INTERNAL_API_KEY\n________ TestAuthenticationSecurity.test_invalid_service_token_rejected ________\ntests/test_authentication_security.py:30: in test_invalid_service_token_rejected\n    with patch('app.api.v1.endpoints.positions_integration.settings') as mock_settings:\n/usr/lib/python3.12/unittest/mock.py:1442: in __enter__\n    self.target = self.getter()\n/usr/lib/python3.12/pkgutil.py:528: in resolve_name\n    result = getattr(result, p)\nE   AttributeError: module 'app.api' has no attribute 'v1'\n_________ TestAuthenticationSecurity.test_valid_service_token_accepted _________\ntests/test_authentication_security.py:43: in test_valid_service_token_accepted\n    with patch('app.api.v1.endpoints.positions_integration.settings') as mock_settings:\n/usr/lib/python3.12/unittest/mock.py:1442: in __enter__\n    self.target = self.getter()\n/usr/lib/python3.12/pkgutil.py:528: in resolve_name\n    result = getattr(result, p)\nE   AttributeError: module 'app.api' has no attribute 'v1'\n________ TestAuthenticationSecurity.test_unauthorized_service_rejected _________\ntests/test_authentication_security.py:61: in test_unauthorized_service_rejected\n    with patch('app.api.v1.endpoints.positions_integration.settings') as mock_settings:\n/usr/lib/python3.12/unittest/mock.py:1442: in __enter__\n    self.target = self.getter()\n/usr/lib/python3.12/pkgutil.py:528: in resolve_name\n    result = getattr(result, p)\nE   AttributeError: module 'app.api' has no attribute 'v1'\n________ TestAuthenticationSecurity.test_expired_service_token_rejected ________\ntests/test_authentication_security.py:81: in test_expired_service_token_rejected\n    with patch('app.api.v1.endpoints.positions_integration.settings') as mock_settings:\n/usr/lib/python3.12/unittest/mock.py:1442: in __enter__\n    self.target = self.getter()\n/usr/lib/python3.12/pkgutil.py:528: in resolve_name\n    result = getattr(result, p)\nE   AttributeError: module 'app.api' has no attribute 'v1'\n=============================== warnings summary ===============================\ntests/test_authentication_security.py:14\n  /home/stocksadmin/order_service_clean/tests/test_authentication_security.py:14: PytestUnknownMarkWarning: Unknown pytest.mark.security - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.security\n\ntests/test_authentication_security.py:27\n  /home/stocksadmin/order_service_clean/tests/test_authentication_security.py:27: PytestUnknownMarkWarning: Unknown pytest.mark.security - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.security\n\ntests/test_authentication_security.py:40\n  /home/stocksadmin/order_service_clean/tests/test_authentication_security.py:40: PytestUnknownMarkWarning: Unknown pytest.mark.security - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.security\n\ntests/test_authentication_security.py:58\n  /home/stocksadmin/order_service_clean/tests/test_authentication_security.py:58: PytestUnknownMarkWarning: Unknown pytest.mark.security - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.security\n\ntests/test_authentication_security.py:78\n  /home/stocksadmin/order_service_clean/tests/test_authentication_security.py:78: PytestUnknownMarkWarning: Unknown pytest.mark.security - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.security\n\ntests/test_authentication_security.py:98\n  /home/stocksadmin/order_service_clean/tests/test_authentication_security.py:98: PytestUnknownMarkWarning: Unknown pytest.mark.security - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.security\n\ntests/test_authentication_security.py:110\n  /home/stocksadmin/order_service_clean/tests/test_authentication_security.py:110: PytestUnknownMarkWarning: Unknown pytest.mark.security - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.security\n\ntests/test_authentication_security.py: 30 warnings\n  /home/stocksadmin/.local/lib/python3.12/site-packages/pydantic/fields.py:826: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    warn(\n\ntests/test_authentication_security.py: 18 warnings\n  /home/stocksadmin/.local/lib/python3.12/site-packages/pydantic/_internal/_config.py:291: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/models/order.py:16: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/models/trade.py:14: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/models/position.py:14: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/models/sync_job.py:11: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/models/gtt_order.py:13: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/models/order_state_history.py:13: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/models/capital_ledger.py:26: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/models/order_event.py:19: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/models/portfolio_config.py:16: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/models/portfolio_allocation.py:16: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/models/portfolio_snapshot.py:15: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/models/position_snapshot.py:15: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/models/strategy_lifecycle_event.py:16: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_authentication_security.py: 11 warnings\n  /home/stocksadmin/.local/lib/python3.12/site-packages/pydantic/fields.py:826: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'example'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    warn(\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:29: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"strategy_id\")\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:36: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"transaction_type\")\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:42: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"order_type\")\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:48: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"product_type\")\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:54: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"validity\")\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:60: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"variety\")\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:66: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"disclosed_quantity\")\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:82: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"trigger_price\")\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:90: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"price\")\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:106: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"order_type\")\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/.local/lib/python3.12/site-packages/pydantic/fields.py:795: PydanticDeprecatedSince20: `min_items` is deprecated and will be removed, use `min_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    warn('`min_items` is deprecated and will be removed, use `min_length` instead', DeprecationWarning)\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/.local/lib/python3.12/site-packages/pydantic/fields.py:801: PydanticDeprecatedSince20: `max_items` is deprecated and will be removed, use `max_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    warn('`max_items` is deprecated and will be removed, use `max_length` instead', DeprecationWarning)\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:176: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"orders\")\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/.local/lib/python3.12/site-packages/pydantic/_internal/_generate_schema.py:312: PydanticDeprecatedSince20: `json_encoders` is deprecated. See https://docs.pydantic.dev/2.9/concepts/serialization/#custom-serializers for alternatives. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    warnings.warn(\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/models/strategy.py:17: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\n  /home/stocksadmin/order_service_clean/app/models/portfolio.py:15: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n=========================== short test summary info ============================\nFAILED tests/test_authentication_security.py::TestAuthenticationSecurity::test_service_to_service_auth_required\nFAILED tests/test_authentication_security.py::TestAuthenticationSecurity::test_invalid_service_token_rejected\nFAILED tests/test_authentication_security.py::TestAuthenticationSecurity::test_valid_service_token_accepted\nFAILED tests/test_authentication_security.py::TestAuthenticationSecurity::test_unauthorized_service_rejected\nFAILED tests/test_authentication_security.py::TestAuthenticationSecurity::test_expired_service_token_rejected\n=================== 5 failed, 2 passed, 98 warnings in 1.06s ===================\n",
      "stderr": "/home/stocksadmin/.local/lib/python3.12/site-packages/pytest_asyncio/plugin.py:208: PytestDeprecationWarning: The configuration option \"asyncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))\n"
    },
    "configuration_tests": {
      "command": "/usr/bin/python3 -m pytest tests/test_configuration_externalization.py -v --tb=short",
      "returncode": 1,
      "duration_seconds": 1.73,
      "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.12.3, pytest-8.3.3, pluggy-1.6.0 -- /usr/bin/python3\ncachedir: .pytest_cache\nmetadata: {'Python': '3.12.3', 'Platform': 'Linux-6.8.0-90-generic-x86_64-with-glibc2.39', 'Packages': {'pytest': '8.3.3', 'pluggy': '1.6.0'}, 'Plugins': {'xdist': '3.8.0', 'Faker': '20.1.0', 'metadata': '3.1.1', 'cov': '5.0.0', 'html': '4.1.1', 'timeout': '2.4.0', 'anyio': '3.7.1', 'asyncio': '0.24.0', 'mock': '3.12.0'}}\nrootdir: /home/stocksadmin/order_service_clean\nconfigfile: pytest.ini\nplugins: xdist-3.8.0, Faker-20.1.0, metadata-3.1.1, cov-5.0.0, html-4.1.1, timeout-2.4.0, anyio-3.7.1, asyncio-0.24.0, mock-3.12.0\nasyncio: mode=Mode.STRICT, default_loop_scope=None\ncollecting ... collected 8 items\n\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_service_urls_from_environment FAILED [ 12%]\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_cors_origins_configurable PASSED [ 25%]\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_production_hosts_configurable FAILED [ 37%]\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_rate_limits_configurable FAILED [ 50%]\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_redis_url_configurable PASSED [ 62%]\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_no_hardcoded_production_values FAILED [ 75%]\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_calendar_service_multi_year_support PASSED [ 87%]\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_environment_specific_configuration_loading FAILED [100%]\n\n=================================== FAILURES ===================================\n_____ TestConfigurationExternalization.test_service_urls_from_environment ______\ntests/test_configuration_externalization.py:21: in test_service_urls_from_environment\n    assert url == 'http://custom-ticker:9999'\nE   AssertionError: assert 'http://localhost:8089' == 'http://custom-ticker:9999'\nE     \nE     - http://custom-ticker:9999\nE     + http://localhost:8089\n------------------------------ Captured log call -------------------------------\nWARNING  app.config.settings:settings.py:41 Service registry module not available, using fallbacks\nWARNING  app.config.settings:settings.py:149 Config service client not available in test mode: No module named 'common'\nWARNING  app.config.settings:settings.py:208 Using test default for JWT_SIGNING_KEY_ID\nWARNING  app.config.settings:settings.py:208 Using test default for INTERNAL_SERVICE_SECRET\nWARNING  app.config.settings:settings.py:208 Using test default for REDIS_URL\nWARNING  app.config.settings:settings.py:208 Using test default for INTERNAL_API_KEY\n_____ TestConfigurationExternalization.test_production_hosts_configurable ______\ntests/test_configuration_externalization.py:54: in test_production_hosts_configurable\n    assert any('custom-prod-host' in origin for origin in origins)\nE   assert False\nE    +  where False = any(<generator object TestConfigurationExternalization.test_production_hosts_configurable.<locals>.<genexpr> at 0x79a5902fb440>)\n------------------------------ Captured log call -------------------------------\nWARNING  app.config.settings:settings.py:208 Using test default for JWT_SIGNING_KEY_ID\nWARNING  app.config.settings:settings.py:208 Using test default for INTERNAL_SERVICE_SECRET\nWARNING  app.config.settings:settings.py:208 Using test default for REDIS_URL\nWARNING  app.config.settings:settings.py:208 Using test default for INTERNAL_API_KEY\n________ TestConfigurationExternalization.test_rate_limits_configurable ________\ntests/test_configuration_externalization.py:60: in test_rate_limits_configurable\n    from app.services.redis_daily_counter import RedisDailyOrderCounter\nE   ImportError: cannot import name 'RedisDailyOrderCounter' from 'app.services.redis_daily_counter' (/home/stocksadmin/order_service_clean/app/services/redis_daily_counter.py)\n_____ TestConfigurationExternalization.test_no_hardcoded_production_values _____\ntests/test_configuration_externalization.py:115: in test_no_hardcoded_production_values\n    pytest.fail(\nE   Failed: Hardcoded value '5.223.52.98' found in app/config/settings.py:312 - Production: Only allows production origins (5.223.52.98, stocksblitz.com)\n_ TestConfigurationExternalization.test_environment_specific_configuration_loading _\ntests/test_configuration_externalization.py:151: in test_environment_specific_configuration_loading\n    assert settings.auth_enabled is True\nE   AssertionError: assert False is True\nE    +  where False = Settings(app_name='Order Execution Service', version='1.0.0', environment='production', port=8002, database_url='postgresql+asyncpg://stocksblitz:b4Gr60lYlbZVZz0ZRTcnf_YRkjO0sluNcwwJ-7lAfn4@localhost:5432/stocksblitz_unified_prod', database_pool_size=20, database_max_overflow=10, redis_url='redis://localhost:6379', redis_order_ttl=86400, redis_required=True, cache_encryption_key='demo_key_32_bytes_for_testing_only', auth_enabled=False, jwks_url='http://user-service:8001/v1/auth/.well-known/jwks.json', jwt_issuer='user_service', jwt_audience='trading_platform', jwt_signing_key_id='test-key-id', INTERNAL_SERVICE_SECRET='test-internal-secret', rate_limit_enabled=True, rate_limit_default='100/minute', rate_limit_order_placement='10/minute', cors_enabled=True, cors_origins='http://localhost:3000,http://localhost:3080', kite_api_key='demo_key', kite_account_id='demo_account', kite_primary_api_key='', kite_personal_api_key='', token_manager_url='http://localhost:8088', ticker_service_url='http://ticker-service:8089', ticker_redis_url='redis://localhost:6379/1', max_order_quantity=10000, max_order_value=10000000.0, enable_order_validation=True, enable_risk_checks=True, risk_margin_multiplier=1.25, max_position_exposure_value=10000000.0, max_position_concentration_pct=0.6, daily_loss_limit=-50000.0, enable_position_tracking=True, position_sync_interval=60, system_user_id=1, metrics_enabled=True, log_level='INFO', internal_api_key='test-internal-api-key').auth_enabled\n------------------------------ Captured log call -------------------------------\nWARNING  app.config.settings:settings.py:208 Using test default for JWT_SIGNING_KEY_ID\nWARNING  app.config.settings:settings.py:208 Using test default for INTERNAL_SERVICE_SECRET\nWARNING  app.config.settings:settings.py:208 Using test default for REDIS_URL\nWARNING  app.config.settings:settings.py:208 Using test default for INTERNAL_API_KEY\nWARNING  app.config.settings:settings.py:208 Using test default for JWT_SIGNING_KEY_ID\nWARNING  app.config.settings:settings.py:208 Using test default for INTERNAL_SERVICE_SECRET\nWARNING  app.config.settings:settings.py:208 Using test default for REDIS_URL\nWARNING  app.config.settings:settings.py:208 Using test default for INTERNAL_API_KEY\nWARNING  app.config.settings:settings.py:208 Using test default for JWT_SIGNING_KEY_ID\nWARNING  app.config.settings:settings.py:208 Using test default for INTERNAL_SERVICE_SECRET\nWARNING  app.config.settings:settings.py:208 Using test default for REDIS_URL\nWARNING  app.config.settings:settings.py:208 Using test default for INTERNAL_API_KEY\n=============================== warnings summary ===============================\ntests/test_configuration_externalization.py: 30 warnings\n  /home/stocksadmin/.local/lib/python3.12/site-packages/pydantic/fields.py:826: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    warn(\n\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_service_urls_from_environment\n  /home/stocksadmin/.local/lib/python3.12/site-packages/pydantic/_internal/_config.py:291: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)\n\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_service_urls_from_environment\n  /home/stocksadmin/order_service_clean/app/models/order.py:16: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_service_urls_from_environment\n  /home/stocksadmin/order_service_clean/app/models/trade.py:14: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_service_urls_from_environment\n  /home/stocksadmin/order_service_clean/app/models/position.py:14: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_service_urls_from_environment\n  /home/stocksadmin/order_service_clean/app/models/sync_job.py:11: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_service_urls_from_environment\n  /home/stocksadmin/order_service_clean/app/models/gtt_order.py:13: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_service_urls_from_environment\n  /home/stocksadmin/order_service_clean/app/models/order_state_history.py:13: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_service_urls_from_environment\n  /home/stocksadmin/order_service_clean/app/models/capital_ledger.py:26: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_service_urls_from_environment\n  /home/stocksadmin/order_service_clean/app/models/order_event.py:19: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_service_urls_from_environment\n  /home/stocksadmin/order_service_clean/app/models/portfolio_config.py:16: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_service_urls_from_environment\n  /home/stocksadmin/order_service_clean/app/models/portfolio_allocation.py:16: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_service_urls_from_environment\n  /home/stocksadmin/order_service_clean/app/models/portfolio_snapshot.py:15: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_service_urls_from_environment\n  /home/stocksadmin/order_service_clean/app/models/position_snapshot.py:15: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_configuration_externalization.py::TestConfigurationExternalization::test_service_urls_from_environment\n  /home/stocksadmin/order_service_clean/app/models/strategy_lifecycle_event.py:16: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n=========================== short test summary info ============================\nFAILED tests/test_configuration_externalization.py::TestConfigurationExternalization::test_service_urls_from_environment\nFAILED tests/test_configuration_externalization.py::TestConfigurationExternalization::test_production_hosts_configurable\nFAILED tests/test_configuration_externalization.py::TestConfigurationExternalization::test_rate_limits_configurable\nFAILED tests/test_configuration_externalization.py::TestConfigurationExternalization::test_no_hardcoded_production_values\nFAILED tests/test_configuration_externalization.py::TestConfigurationExternalization::test_environment_specific_configuration_loading\n=================== 5 failed, 3 passed, 44 warnings in 0.76s ===================\n",
      "stderr": "/home/stocksadmin/.local/lib/python3.12/site-packages/pytest_asyncio/plugin.py:208: PytestDeprecationWarning: The configuration option \"asyncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))\n"
    },
    "broker_integration_tests": {
      "command": "/usr/bin/python3 -m pytest tests/test_broker_integration.py -v --tb=short",
      "returncode": 2,
      "duration_seconds": 1.67,
      "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.12.3, pytest-8.3.3, pluggy-1.6.0 -- /usr/bin/python3\ncachedir: .pytest_cache\nmetadata: {'Python': '3.12.3', 'Platform': 'Linux-6.8.0-90-generic-x86_64-with-glibc2.39', 'Packages': {'pytest': '8.3.3', 'pluggy': '1.6.0'}, 'Plugins': {'xdist': '3.8.0', 'Faker': '20.1.0', 'metadata': '3.1.1', 'cov': '5.0.0', 'html': '4.1.1', 'timeout': '2.4.0', 'anyio': '3.7.1', 'asyncio': '0.24.0', 'mock': '3.12.0'}}\nrootdir: /home/stocksadmin/order_service_clean\nconfigfile: pytest.ini\nplugins: xdist-3.8.0, Faker-20.1.0, metadata-3.1.1, cov-5.0.0, html-4.1.1, timeout-2.4.0, anyio-3.7.1, asyncio-0.24.0, mock-3.12.0\nasyncio: mode=Mode.STRICT, default_loop_scope=None\ncollecting ... collected 0 items / 1 error\n\n==================================== ERRORS ====================================\n______________ ERROR collecting tests/test_broker_integration.py _______________\n../.local/lib/python3.12/site-packages/_pytest/python.py:493: in importtestmodule\n    mod = import_path(\n../.local/lib/python3.12/site-packages/_pytest/pathlib.py:582: in import_path\n    importlib.import_module(module_name)\n/usr/lib/python3.12/importlib/__init__.py:90: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n<frozen importlib._bootstrap>:1387: in _gcd_import\n    ???\n<frozen importlib._bootstrap>:1360: in _find_and_load\n    ???\n<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked\n    ???\n<frozen importlib._bootstrap>:935: in _load_unlocked\n    ???\n../.local/lib/python3.12/site-packages/_pytest/assertion/rewrite.py:184: in exec_module\n    exec(co, module.__dict__)\ntests/test_broker_integration.py:7: in <module>\n    from app.services.enhanced_order_service import EnhancedOrderService\napp/services/enhanced_order_service.py:25: in <module>\n    from .capital_ledger_service import CapitalLedgerService\nE     File \"/home/stocksadmin/order_service_clean/app/services/capital_ledger_service.py\", line 1\nE       \"\"\"\nE       ^^^\nE   SyntaxError: (unicode error) 'utf-8' codec can't decode byte 0x92 in position 282: invalid start byte\n=============================== warnings summary ===============================\napp/models/order.py:16\n  /home/stocksadmin/order_service_clean/app/models/order.py:16: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/trade.py:14\n  /home/stocksadmin/order_service_clean/app/models/trade.py:14: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/position.py:14\n  /home/stocksadmin/order_service_clean/app/models/position.py:14: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/sync_job.py:11\n  /home/stocksadmin/order_service_clean/app/models/sync_job.py:11: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/gtt_order.py:13\n  /home/stocksadmin/order_service_clean/app/models/gtt_order.py:13: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/order_state_history.py:13\n  /home/stocksadmin/order_service_clean/app/models/order_state_history.py:13: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/capital_ledger.py:26\n  /home/stocksadmin/order_service_clean/app/models/capital_ledger.py:26: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/order_event.py:19\n  /home/stocksadmin/order_service_clean/app/models/order_event.py:19: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/portfolio_config.py:16\n  /home/stocksadmin/order_service_clean/app/models/portfolio_config.py:16: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n\napp/models/portfolio_allocation.py:16\n  /home/stocksadmin/order_service_clean/app/models/portfolio_allocation.py:16: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/portfolio_snapshot.py:15\n  /home/stocksadmin/order_service_clean/app/models/portfolio_snapshot.py:15: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/position_snapshot.py:15\n  /home/stocksadmin/order_service_clean/app/models/position_snapshot.py:15: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/strategy_lifecycle_event.py:16\n  /home/stocksadmin/order_service_clean/app/models/strategy_lifecycle_event.py:16: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\n../.local/lib/python3.12/site-packages/pydantic/fields.py:826: 30 warnings\n  /home/stocksadmin/.local/lib/python3.12/site-packages/pydantic/fields.py:826: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    warn(\n\n../.local/lib/python3.12/site-packages/pydantic/_internal/_config.py:291\n  /home/stocksadmin/.local/lib/python3.12/site-packages/pydantic/_internal/_config.py:291: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n=========================== short test summary info ============================\nERROR tests/test_broker_integration.py\n!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!\n======================== 44 warnings, 1 error in 0.87s =========================\n",
      "stderr": "/home/stocksadmin/.local/lib/python3.12/site-packages/pytest_asyncio/plugin.py:208: PytestDeprecationWarning: The configuration option \"asyncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))\n"
    },
    "business_logic_tests": {
      "command": "/usr/bin/python3 -m pytest tests/test_business_logic_implementation.py -v --tb=short",
      "returncode": 1,
      "duration_seconds": 1.89,
      "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.12.3, pytest-8.3.3, pluggy-1.6.0 -- /usr/bin/python3\ncachedir: .pytest_cache\nmetadata: {'Python': '3.12.3', 'Platform': 'Linux-6.8.0-90-generic-x86_64-with-glibc2.39', 'Packages': {'pytest': '8.3.3', 'pluggy': '1.6.0'}, 'Plugins': {'xdist': '3.8.0', 'Faker': '20.1.0', 'metadata': '3.1.1', 'cov': '5.0.0', 'html': '4.1.1', 'timeout': '2.4.0', 'anyio': '3.7.1', 'asyncio': '0.24.0', 'mock': '3.12.0'}}\nrootdir: /home/stocksadmin/order_service_clean\nconfigfile: pytest.ini\nplugins: xdist-3.8.0, Faker-20.1.0, metadata-3.1.1, cov-5.0.0, html-4.1.1, timeout-2.4.0, anyio-3.7.1, asyncio-0.24.0, mock-3.12.0\nasyncio: mode=Mode.STRICT, default_loop_scope=None\ncollecting ... collected 6 items\n\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_order_event_processing_not_placeholder PASSED [ 16%]\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_trade_history_sequence_integrity_calculated PASSED [ 33%]\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results FAILED [ 50%]\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_market_hours_supports_multiple_years PASSED [ 66%]\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_real_trading_data_integration FAILED [ 83%]\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_strategy_pnl_calculated_from_positions FAILED [100%]\n\n=================================== FAILURES ===================================\n____ TestBusinessLogicImplementation.test_validation_system_stores_results _____\ntests/test_business_logic_implementation.py:84: in test_validation_system_stores_results\n    from app.api.v1.endpoints.external_order_validation import get_validation_issues\napp/api/v1/__init__.py:6: in <module>\n    from app.api.v1.endpoints import (\napp/api/v1/endpoints/manual_attribution.py:16: in <module>\n    from ...dependencies.acl import require_permissions\napp/api/dependencies/acl.py:10: in <module>\n    from app.core.database import get_db\nE   ModuleNotFoundError: No module named 'app.core'\n______ TestBusinessLogicImplementation.test_real_trading_data_integration ______\ntests/test_business_logic_implementation.py:147: in test_real_trading_data_integration\n    with patch('app.api.v1.endpoints.positions_integration.get_kite_client_sync') as mock_get_client:\n/usr/lib/python3.12/unittest/mock.py:1442: in __enter__\n    self.target = self.getter()\n/usr/lib/python3.12/pkgutil.py:528: in resolve_name\n    result = getattr(result, p)\nE   AttributeError: module 'app.api' has no attribute 'v1'\n_ TestBusinessLogicImplementation.test_strategy_pnl_calculated_from_positions __\ntests/test_business_logic_implementation.py:189: in test_strategy_pnl_calculated_from_positions\n    with patch('app.api.v1.endpoints.positions_integration.verify_internal_service'):\n/usr/lib/python3.12/unittest/mock.py:1442: in __enter__\n    self.target = self.getter()\n/usr/lib/python3.12/pkgutil.py:528: in resolve_name\n    result = getattr(result, p)\nE   AttributeError: module 'app.api' has no attribute 'v1'\n=============================== warnings summary ===============================\napp/models/order.py:16\n  /home/stocksadmin/order_service_clean/app/models/order.py:16: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/trade.py:14\n  /home/stocksadmin/order_service_clean/app/models/trade.py:14: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/position.py:14\n  /home/stocksadmin/order_service_clean/app/models/position.py:14: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/sync_job.py:11\n  /home/stocksadmin/order_service_clean/app/models/sync_job.py:11: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/gtt_order.py:13\n  /home/stocksadmin/order_service_clean/app/models/gtt_order.py:13: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/order_state_history.py:13\n  /home/stocksadmin/order_service_clean/app/models/order_state_history.py:13: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/capital_ledger.py:26\n  /home/stocksadmin/order_service_clean/app/models/capital_ledger.py:26: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/order_event.py:19\n  /home/stocksadmin/order_service_clean/app/models/order_event.py:19: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/portfolio_config.py:16\n  /home/stocksadmin/order_service_clean/app/models/portfolio_config.py:16: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n\napp/models/portfolio_allocation.py:16\n  /home/stocksadmin/order_service_clean/app/models/portfolio_allocation.py:16: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/portfolio_snapshot.py:15\n  /home/stocksadmin/order_service_clean/app/models/portfolio_snapshot.py:15: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/position_snapshot.py:15\n  /home/stocksadmin/order_service_clean/app/models/position_snapshot.py:15: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\napp/models/strategy_lifecycle_event.py:16\n  /home/stocksadmin/order_service_clean/app/models/strategy_lifecycle_event.py:16: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\n../.local/lib/python3.12/site-packages/pydantic/fields.py:826: 30 warnings\n  /home/stocksadmin/.local/lib/python3.12/site-packages/pydantic/fields.py:826: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    warn(\n\n../.local/lib/python3.12/site-packages/pydantic/_internal/_config.py:291: 1 warning\ntests/test_business_logic_implementation.py: 17 warnings\n  /home/stocksadmin/.local/lib/python3.12/site-packages/pydantic/_internal/_config.py:291: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)\n\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_order_event_processing_not_placeholder\n  /home/stocksadmin/.local/lib/python3.12/site-packages/pytest_asyncio/plugin.py:783: DeprecationWarning: The event_loop fixture provided by pytest-asyncio has been redefined in\n  /home/stocksadmin/order_service_clean/tests/conftest.py:16\n  Replacing the event_loop fixture with a custom implementation is deprecated\n  and will lead to errors in the future.\n  If you want to request an asyncio event loop with a scope other than function\n  scope, use the \"scope\" argument to the asyncio mark when marking the tests.\n  If you want to return different types of event loops, use the event_loop_policy\n  fixture.\n  \n    warnings.warn(\n\ntests/test_business_logic_implementation.py: 11 warnings\n  /home/stocksadmin/.local/lib/python3.12/site-packages/pydantic/fields.py:826: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'example'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    warn(\n\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:29: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"strategy_id\")\n\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:36: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"transaction_type\")\n\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:42: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"order_type\")\n\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:48: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"product_type\")\n\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:54: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"validity\")\n\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:60: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"variety\")\n\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:66: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"disclosed_quantity\")\n\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:82: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"trigger_price\")\n\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:90: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"price\")\n\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:106: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"order_type\")\n\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\n  /home/stocksadmin/.local/lib/python3.12/site-packages/pydantic/fields.py:795: PydanticDeprecatedSince20: `min_items` is deprecated and will be removed, use `min_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    warn('`min_items` is deprecated and will be removed, use `min_length` instead', DeprecationWarning)\n\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\n  /home/stocksadmin/.local/lib/python3.12/site-packages/pydantic/fields.py:801: PydanticDeprecatedSince20: `max_items` is deprecated and will be removed, use `max_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    warn('`max_items` is deprecated and will be removed, use `max_length` instead', DeprecationWarning)\n\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\n  /home/stocksadmin/order_service_clean/app/api/v1/schemas.py:176: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    @validator(\"orders\")\n\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\n  /home/stocksadmin/.local/lib/python3.12/site-packages/pydantic/_internal/_generate_schema.py:312: PydanticDeprecatedSince20: `json_encoders` is deprecated. See https://docs.pydantic.dev/2.9/concepts/serialization/#custom-serializers for alternatives. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    warnings.warn(\n\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\n  /home/stocksadmin/order_service_clean/app/models/strategy.py:17: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\ntests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\n  /home/stocksadmin/order_service_clean/app/models/portfolio.py:15: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)\n    Base = declarative_base()\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n=========================== short test summary info ============================\nFAILED tests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_validation_system_stores_results\nFAILED tests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_real_trading_data_integration\nFAILED tests/test_business_logic_implementation.py::TestBusinessLogicImplementation::test_strategy_pnl_calculated_from_positions\n=================== 3 failed, 3 passed, 92 warnings in 1.09s ===================\n",
      "stderr": "/home/stocksadmin/.local/lib/python3.12/site-packages/pytest_asyncio/plugin.py:208: PytestDeprecationWarning: The configuration option \"asyncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))\n"
    },
    "existing_tests": {
      "command": "/usr/bin/python3 -m pytest tests/ -x --tb=short --ignore=tests/test_authentication_security.py --ignore=tests/test_configuration_externalization.py --ignore=tests/test_broker_integration.py --ignore=tests/test_business_logic_implementation.py",
      "returncode": 1,
      "duration_seconds": 1.25,
      "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.12.3, pytest-8.3.3, pluggy-1.6.0\nrootdir: /home/stocksadmin/order_service_clean\nconfigfile: pytest.ini\nplugins: xdist-3.8.0, Faker-20.1.0, metadata-3.1.1, cov-5.0.0, html-4.1.1, timeout-2.4.0, anyio-3.7.1, asyncio-0.24.0, mock-3.12.0\nasyncio: mode=Mode.STRICT, default_loop_scope=None\ncollected 0 items / 1 error\n\n==================================== ERRORS ====================================\n_______ ERROR collecting tests/api/test_manual_attribution_endpoints.py ________\nImportError while importing test module '/home/stocksadmin/order_service_clean/tests/api/test_manual_attribution_endpoints.py'.\nHint: make sure your test modules/packages have valid Python names.\nTraceback:\n/usr/lib/python3.12/importlib/__init__.py:90: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\ntests/api/test_manual_attribution_endpoints.py:15: in <module>\n    from order_service.app.api.v1.endpoints.manual_attribution import router\nE   ModuleNotFoundError: No module named 'order_service'\n=========================== short test summary info ============================\nERROR tests/api/test_manual_attribution_endpoints.py\n!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!\n=============================== 1 error in 0.50s ===============================\n",
      "stderr": "/home/stocksadmin/.local/lib/python3.12/site-packages/pytest_asyncio/plugin.py:208: PytestDeprecationWarning: The configuration option \"asyncio_default_fixture_loop_scope\" is unset.\nThe event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: \"function\", \"class\", \"module\", \"package\", \"session\"\n\n  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))\n"
    },
    "todo_check": {
      "command": "grep -r -n --include=*.py -E (TODO|FIXME|XXX|HACK) app/",
      "returncode": 0,
      "duration_seconds": 0.01,
      "stdout": "app/main.py:476:# TODO: Remove after verifying all clients use CorrelationIDMiddleware headers\n",
      "stderr": "",
      "todo_count": 2
    },
    "pass_statement_check": {
      "command": "grep -r -n --include=*.py ^[[:space:]]*pass[[:space:]]*$ app/",
      "returncode": 0,
      "duration_seconds": 0.0,
      "stdout": "app/services/kite_account_rate_limiter.py:404:                    pass\napp/services/circuit_breaker.py:34:    pass\napp/workers/sync_workers.py:255:                    pass\napp/workers/sync_workers.py:884:        pass\napp/workers/tiered_sync_worker.py:82:                    pass\napp/workers/strategy_pnl_sync.py:131:                pass\napp/workers/reconciliation_worker.py:133:                    pass\napp/workers/reconciliation_worker.py:147:                    pass\napp/workers/tier_worker.py:47:                pass\napp/workers/tick_listener.py:112:                pass\napp/workers/tick_listener.py:119:                pass\napp/workers/tick_listener.py:249:            pass\napp/websocket/positions.py:115:            pass\napp/auth/test_auth.py:122:    pass\napp/auth/jwt_auth.py:160:        pass\napp/utils/acl_helpers.py:19:            pass\napp/utils/acl_helpers.py:26:        pass\napp/utils/acl_helpers.py:29:        pass\n",
      "stderr": "",
      "pass_count": 19
    }
  }
}